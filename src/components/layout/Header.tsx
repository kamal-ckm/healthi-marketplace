'use client';

import React from 'react';
import Link from 'next/link';
import { ShoppingCart, Search, User, Wallet, Loader2 } from 'lucide-react';
import { useCart } from '@/lib/cart-context';
import { useCustomerAuth } from '@/lib/auth-customer';

export function Header() {
    const { summary, loading: cartLoading } = useCart();
    const { user, isAuthenticated, logout } = useCustomerAuth();

    return (\n        <header className=\"sticky top-0 z-50 w-full bg-white border-b border-slate-100\">\n            <div className=\"container mx-auto px-4 h-20 flex items-center justify-between\">\n                <Link href=\"/\" className=\"flex items-center gap-3 active:scale-95 transition-transform\">\n                    <div className=\"w-10 h-10 bg-[#00A59B] rounded-xl flex items-center justify-center font-bold text-white text-xl shadow-lg shadow-[#00A59B]/20\">H</div>\n                    <span className=\"text-2xl font-bold tracking-tight text-slate-900 hidden sm:block\" style={{ fontFamily: 'Raleway' }}>Healthi</span>\n                </Link>\n\n                <div className=\"hidden md:flex flex-1 max-w-md mx-8\">\n                    <div className=\"relative w-full group\">\n                        <Search size={18} className=\"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-[#00A59B] transition-colors\" />\n                        <input\n                            id=\"global-search\"\n                            type=\"text\"\n                            placeholder=\"Search products, equipment...\"\n                            className=\"w-full bg-slate-50 border border-transparent focus:bg-white focus:border-[#00A59B]/30 rounded-full pl-12 pr-4 py-2.5 text-sm outline-none transition-all\"\n                        />\n                    </div>\n                </div>\n\n                <div className=\"flex items-center gap-2 sm:gap-6\">\n                    {isAuthenticated ? (\n                        <div className=\"hidden sm:flex items-center gap-4 py-1.5 px-3 bg-[#00A59B]/5 rounded-full\">\n                            <div className=\"flex flex-col items-end\">\n                                <span className=\"text-[10px] uppercase font-bold text-slate-400 leading-none mb-1\">Wallet Balance</span>\n                                <span className=\"text-sm font-bold text-[#00A59B]\">â‚¹{Number(user?.wallet_balance || 0).toLocaleString()}</span>\n                            </div>\n                            <div className=\"w-8 h-8 bg-[#00A59B] rounded-full flex items-center justify-center text-white shadow-sm ring-2 ring-white\">\n                                <Wallet size={16} />\n                            </div>\n                        </div>\n                    ) : null}\n\n                    <div className=\"flex items-center gap-2\">\n                        {isAuthenticated ? (\n                            <div className=\"flex items-center gap-4\">\n                                <Link\n                                    href=\"/cart\"\n                                    className=\"relative p-2 text-slate-600 hover:text-[#00A59B] transition-colors active:scale-90\"\n                                >\n                                    <ShoppingCart size={24} />\n                                    {summary.totalItems > 0 && (\n                                        <span className=\"absolute -top-1 -right-1 bg-[#00A59B] text-white text-[10px] font-bold w-5 h-5 rounded-full flex items-center justify-center ring-2 ring-white animate-in zoom-in\">\n                                            {summary.totalItems}\n                                        </span>\n                                    )}\n                                </Link>\n                                <button\n                                    onClick={logout}\n                                    className=\"text-sm font-medium text-slate-500 hover:text-[#00A59B] transition-colors\"\n                                >\n                                    Logout\n                                </button>\n                            </div>\n                        ) : (\n                            <Link\n                                href=\"/login\"\n                                className=\"flex items-center gap-2 text-sm font-semibold text-slate-700 hover:text-[#00A59B] transition-colors py-2 px-4 rounded-full hover:bg-slate-50\"\n                            >\n                                <User size={18} />\n                                Login\n                            </Link>\n                        )}\n                    </div>\n                </div>\n            </div>\n        </header>\n    );\n}\n
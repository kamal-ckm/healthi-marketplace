'use client';\n\nimport { useEffect, useState } from 'react';\nimport Link from 'next/link';\nimport { ShoppingCart, ArrowRight, Wallet, CheckCircle2, ChevronRight, Package, Truck, ShieldCheck, HeartPulse } from 'lucide-react';\nimport { Header } from '@/components/layout/Header';\nimport { useCustomerAuth } from '@/lib/auth-customer';\n\nconst API_BASE = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5001';\n\ninterface ProductCardProps {\n    id: string;\n    name: string;\n    slug: string;\n    price: string;\n    mrp: string;\n    images: string[];\n    category: string;\n}\n\nfunction ProductCard({ product }: { product: ProductCardProps }) {\n    const price = parseFloat(product.price);\n    const mrp = parseFloat(product.mrp);\n    const discount = mrp > price ? Math.round(((mrp - price) / mrp) * 100) : 0;\n\n    return (\n        <Link\n            href={`/products/${product.slug}`}\n            className=\"group bg-white rounded-2xl border border-slate-100 overflow-hidden hover:border-[#00A59B]/30 hover:shadow-xl hover:shadow-[#00A59B]/5 transition-all duration-300 flex flex-col\"\n        >\n            <div className=\"relative aspect-[4/3] bg-slate-50 overflow-hidden\">\n                {product.images && product.images[0] ? (\n                    <img\n                        src={product.images[0]}\n                        alt={product.name}\n                        className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500\"\n                    />\n                ) : (\n                    <div className=\"w-full h-full flex items-center justify-center text-slate-300\">\n                        <ShoppingCart size={32} strokeWidth={1.5} />\n                    </div>\n                )}\n                {discount > 0 && (\n                    <div className=\"absolute top-3 left-3 bg-[#FFC600] text-slate-900 text-[10px] font-bold px-2 py-1 rounded-md shadow-sm\">\n                        {discount}% OFF\n                    </div>\n                )}\n                <div className=\"absolute top-3 right-3 bg-white/90 backdrop-blur-sm text-[#00A59B] text-[10px] font-bold px-2 py-1 rounded-md shadow-sm border border-[#00A59B]/10\">\n                    WALLET ELIGIBLE\n                </div>\n            </div>\n\n            <div className=\"p-4 flex-1 flex flex-col\">\n                <span className=\"text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-1\">{product.category}</span>\n                <h3 className=\"text-sm font-bold text-slate-900 line-clamp-2 mb-2 group-hover:text-[#00A59B] transition-colors\">{product.name}</h3>\n\n                <div className=\"mt-auto\">\n                    <div className=\"flex items-baseline gap-2\">\n                        <span className=\"text-lg font-bold text-slate-900\">₹{price.toLocaleString('en-IN')}</span>\n                        {mrp > price && (\n                            <span className=\"text-xs text-slate-400 line-through\">₹{mrp.toLocaleString('en-IN')}</span>\n                        )}\n                    </div>\n                </div>\n            </div>\n        </Link>\n    );\n}\n\nexport default function StorefrontPage() {\n    const [products, setProducts] = useState<ProductCardProps[]>([]);\n    const [loading, setLoading] = useState(true);\n    const { user, isAuthenticated } = useCustomerAuth();\n\n    useEffect(() => {\n        async function fetchProducts() {\n            try {\n                const res = await fetch(`${API_BASE}/api/products`);\n                const data = await res.json();\n                setProducts(data);\n            } catch (err) {\n                console.error('Failed to fetch products:', err);\n            } finally {\n                setLoading(false);\n            }\n        }\n        fetchProducts();\n    }, []);\n\n    return (\n        <div className=\"min-h-screen bg-[#FDFDFF] font-body\">\n            <Header />\n\n            {/* Hero Section */}\n            <section className=\"relative overflow-hidden bg-[#0F172A] pt-16 pb-24 lg:pt-24 lg:pb-32\">\n                <div className=\"absolute inset-0 opacity-20\">\n                    <div className=\"absolute top-0 -left-1/4 w-1/2 h-full bg-[#00A59B] blur-[120px] rounded-full\" />\n                    <div className=\"absolute bottom-0 -right-1/4 w-1/2 h-full bg-[#0031A7] blur-[120px] rounded-full\" />\n                </div>\n\n                <div className=\"container mx-auto px-4 relative z-10\">\n                    <div className=\"max-w-3xl\">\n                        <div className=\"inline-flex items-center gap-2 bg-[#00A59B]/10 border border-[#00A59B]/20 rounded-full px-4 py-1.5 mb-6 animate-in fade-in slide-in-from-bottom-4 duration-700\">\n                            <span className=\"relative flex h-2 w-2\">\n                                <span className=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-[#00A59B] opacity-75\"></span>\n                                <span className=\"relative inline-flex rounded-full h-2 w-2 bg-[#00A59B]\"></span>\n                            </span>\n                            <span className=\"text-[10px] font-bold text-[#00A59B] uppercase tracking-widest\">Corporate Wellness Program</span>\n                        </div>\n                        <h1 className=\"text-4xl lg:text-7xl font-bold text-white mb-6 leading-[1.1] animate-in fade-in slide-in-from-bottom-6 duration-1000\" style={{ fontFamily: 'Raleway' }}>\n                            Your Health, <br /> Powered by <span className=\"text-[#00A59B]\">Healthi</span>\n                        </h1>\n                        <p className=\"text-lg lg:text-xl text-slate-300 mb-10 leading-relaxed max-w-2xl animate-in fade-in slide-in-from-bottom-8 duration-1000\">\n                            Use your employer-funded health wallet to shop the best wellness products. From high-tech fitness gear to daily nutrition.\n                        </p>\n                        <div className=\"flex flex-wrap gap-4 animate-in fade-in slide-in-from-bottom-10 duration-1000\">\n                            <button className=\"bg-[#00A59B] hover:bg-[#008C84] text-white px-8 py-4 rounded-xl font-bold transition-all shadow-lg shadow-[#00A59B]/25 active:scale-95\">\n                                Explore Shop\n                            </button>\n                            <button className=\"bg-white/5 hover:bg-white/10 text-white border border-white/10 backdrop-blur-md px-8 py-4 rounded-xl font-bold transition-all active:scale-95\">\n                                Check Eligibility\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </section>\n\n            {/* Quick Benefits */}\n            <div className=\"container mx-auto px-4 -mt-12 relative z-20\">\n                <div className=\"grid md:grid-cols-3 gap-6\">\n                    {[ \n                        { icon: Wallet, title: \"Wallet Integrated\", desc: \"Seamlessly use your health credit\" },\n                        { icon: Truck, title: \"Express Delivery\", desc: \"Get supplies at your doorstep\" },\n                        { icon: ShieldCheck, title: \"Quality Guaranteed\", desc: \"Handpicked wellness brands only\" }\n                    ].map((item, idx) => (\n                        <div key={idx} className=\"bg-white p-6 rounded-2xl shadow-xl shadow-slate-200/50 border border-slate-100 flex items-center gap-5 translate-y-0 hover:-translate-y-1 transition-transform\">\n                            <div className=\"w-14 h-14 bg-[#00A59B]/5 rounded-xl flex items-center justify-center text-[#00A59B]\">\n                                <item.icon size={28} />\n                            </div>\n                            <div>\n                                <h4 className=\"font-bold text-slate-900\">{item.title}</h4>\n                                <p className=\"text-sm text-slate-500\">{item.desc}</p>\n                            </div>\n                        </div>\n                    ))}\n                </div>\n            </div>\n\n            {/* Main Shop */}\n            <section className=\"py-20 lg:py-32\">\n                <div className=\"container mx-auto px-4\">\n                    <div className=\"flex items-end justify-between mb-12\">\n                        <div>\n                            <h2 className=\"text-3xl lg:text-4xl font-bold text-slate-900 mb-3\" style={{ fontFamily: 'Raleway' }}>Featured Products</h2>\n                            <p className=\"text-slate-500\">Handpicked wellness essentials for your daily routine.</p>\n                        </div>\n                        <Link href=\"/products\" className=\"hidden sm:flex items-center gap-2 text-[#00A59B] font-bold hover:gap-3 transition-all\">\n                            View All <ChevronRight size={18} />\n                        </Link>\n                    </div>\n\n                    {loading ? (\n                        <div className=\"flex justify-center py-20\">\n                            <Loader2 size={32} className=\"animate-spin text-[#00A59B]\" />\n                        </div>\n                    ) : (\n                        <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6\">\n                            {products.map(p => <ProductCard key={p.id} product={p} />)}\n                        </div>\n                    )}\n                </div>\n            </section>\n\n            <section className=\"bg-[#0031A7] py-16\">\n                <div className=\"container mx-auto px-4 text-center\">\n                    <HeartPulse size={48} className=\"text-white/20 mx-auto mb-6\" />\n                    <h2 className=\"text-3xl font-bold text-white mb-4\" style={{ fontFamily: 'Raleway' }}>Personalize Your Experience</h2>\n                    <p className=\"text-white/70 mb-8 max-w-xl mx-auto\">Link your Healthi account to see personalized recommendations based on your recent health checks and assessments.</p>\n                    <button className=\"bg-white text-[#0031A7] px-8 py-3 rounded-full font-bold hover:bg-[#FFC600] hover:text-slate-900 transition-colors shadow-lg shadow-black/10\">\n                        Connect Account\n                    </button>\n                </div>\n            </section>\n\n            <footer className=\"bg-slate-900 text-slate-400 py-20\">\n                <div className=\"container mx-auto px-4\">\n                    <div className=\"grid md:grid-cols-4 gap-12 mb-16\">\n                        <div className=\"col-span-2\">\n                            <Link href=\"/\" className=\"flex items-center gap-3 mb-6\">\n                                <div className=\"w-8 h-8 bg-[#00A59B] rounded-lg flex items-center justify-center font-bold text-white text-lg\">H</div>\n                                <span className=\"text-xl font-bold text-white\" style={{ fontFamily: 'Raleway' }}>Healthi</span>\n                            </Link>\n                            <p className=\"max-w-sm mb-6\">Your trusted destination for health and wellness products, fully integrated with your corporate health benefits.</p>\n                        </div>\n                        <div>\n                            <h5 className=\"text-white font-bold mb-6\">Shop</h5>\n                            <ul className=\"space-y-4 text-sm\">\n                                <li><Link href=\"#\" className=\"hover:text-[#00A59B] transition-colors\">Fitness Gear</Link></li>\n                                <li><Link href=\"#\" className=\"hover:text-[#00A59B] transition-colors\">Nutrition</Link></li>\n                                <li><Link href=\"#\" className=\"hover:text-[#00A59B] transition-colors\">Mental Health</Link></li>\n                            </ul>\n                        </div>\n                        <div>\n                            <h5 className=\"text-white font-bold mb-6\">Company</h5>\n                            <ul className=\"space-y-4 text-sm\">\n                                <li><Link href=\"#\" className=\"hover:text-[#00A59B] transition-colors\">About Us</Link></li>\n                                <li><Link href=\"#\" className=\"hover:text-[#00A59B] transition-colors\">Privacy Policy</Link></li>\n                                <li><Link href=\"#\" className=\"hover:text-[#00A59B] transition-colors\">Contact</Link></li>\n                            </ul>\n                        </div>\n                    </div>\n                    <div className=\"pt-8 border-t border-slate-800 text-center text-xs tracking-widest\">\n                        &copy; 2026 HEALTHI MARKETPLACE. ALL RIGHTS RESERVED.\n                    </div>\n                </div>\n            </footer>\n        </div>\n    );\n}\n